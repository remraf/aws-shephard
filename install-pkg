#!/bin/bash
#
# install packages
#
##

PKGDIR=/data/opt/pkgs
PKGS=(
   bash-completion
   compat-libstdc++-33
   compat-libstdc++-33.i686
   epel-release
   expect
   gcc-c++
   git 
   glibc.i686
   glibc-devel.i686
   libgcc.i686
   libstdc++.i686
   libstdc++-static
   libstdc++-static.i686
   redhat-lsb
   tmux 
)

# Install Updates
yum update -y

# Install packages
yum install -y ${PKGS[*]}

### CUSTOM PACKAGES

# Install Anaconda
ANACONDADIR=${PKGDIR}/anaconda
if [[ ! -d $ANACONDADIR ]]
then
	mkdir -p $ANACONDADIR; cd $ANACONDADIR
	curl -O https://repo.continuum.io/archive/Anaconda3-5.0.0-Linux-x86_64.sh &&
	bash Anaconda3-5.0.0-Linux-x86_64.sh -b -p ${ANACONDADIR}/3.6 && 
	rm Anaconda3-5.0.0-Linux-x86_64.sh
fi

# Install Environment Modules
echo "/data/etc/modulefiles" >> /usr/share/Modules/init/.modulespath

# Configure SGE
qconf -Mq /data/opt/sge/all.q
qconf -Aq /data/opt/sge/autoscale.q
